<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Google Api</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div id="map_canvas"></div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCESMQjbnV3D0OaZoVvsLKbZTqLIObG4Jo" async defer></script>

<script>
    var data = '{"name": "mkyong","age": 30,"address": {"streetAddress": "88 8nd Street","city": "New York"}}';
    var json = JSON.parse(data);
    var map;
    var geo;
    window.onload = function init() {

        geo = new google.maps.Geocoder();

        var opt = {
            zoom: 15,
            center: {
                lat:31.2564,
                lng:31.6897
            }
        }

        map  = new google.maps.Map(document.querySelector("#map_canvas"),opt);

        var address = json.address.city;
        geo.geocode({'address': address}, function(results,status) {
            if(status == google.maps.GeocoderStatus.OK) {
                //console.log(results[0].geometry.location);
                map.setCenter(results[0].geometry.location);
                var marker = new google.maps.Marker({
                   map:map,
                    position: results[0].geometry.location
                });
                console.log(results[0]);
                console.log(results[0].geometry.location);
            }
            else {
                alert('Not valid address')
            }
        });
    }
</script>
</body>
</html>
